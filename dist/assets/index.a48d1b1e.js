var ne=Object.defineProperty,se=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var q=(e,t,o)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,M=(e,t)=>{for(var o in t||(t={}))le.call(t,o)&&q(e,o,t[o]);if(A)for(var o of A(t))ie.call(t,o)&&q(e,o,t[o]);return e},P=(e,t)=>se(e,re(t));import{r as g,w as S,v as G,u as l,o as a,c as d,a as u,t as I,b as R,d as p,e as O,f as ae,g as ue,n as ce,h as U,F as E,i as L,j as de,k as fe,l as pe,m as me,p as _e,q as V,s as ve,x as ge,y as F,z as k,A as N,B as xe,C as be,D as he}from"./vendor.50f79adc.js";const ye=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};ye();const j=g(!1);let J="",B=null;function ke(e,t){J=e,B=t,j.value=!0}function $e(){B&&B(),z()}function z(){j.value=!1}function we(){return J}function H(){return{visible:j,close:z,confirm:ke,confirmed:$e,getMessage:we}}const Ce={class:"fixed inset-x-0 bottom-0 m-4 p-3 shadow-2xl rounded border text-right bg-primary",role:"alert"},Se={class:"pt-2.5 text-left"},Ie={setup(e){const{visible:t,getMessage:o,confirmed:i,close:n}=H();return(r,s)=>S((a(),d("div",Ce,[u("div",null,[u("span",null,I(l(o)()),1)]),u("div",Se,[u("button",{class:"bg-blue-600 text-white p-2.5 rounded-full text-xs font-bold mr-2 w-20",onClick:s[0]||(s[0]=(...c)=>l(i)&&l(i)(...c))}," \u0628\u0644\u0647 "),u("button",{class:"bg-yellow-500 text-white p-2.5 rounded-full text-xs font-bold w-20",onClick:s[1]||(s[1]=(...c)=>l(n)&&l(n)(...c))}," \u062E\u06CC\u0631 ")])],512)),[[G,l(t)]])}};var x=(e,t)=>{const o=e.__vccOpts||e;for(const[i,n]of t)o[i]=n;return o};const Re={},Ve={class:"material-icons-outlined"};function Te(e,t){return a(),d("span",Ve," \uE574 ")}var Ge=x(Re,[["render",Te]]);const Oe={class:"flex justify-between text-primary-dark p-5 font-bold mb-2.5 shadow-md"},Ee={setup(e){const t="3.6.0";return(o,i)=>{const n=R("router-link");return a(),d("div",Oe,[u("p",null," Tote "+I(l(t)),1),p(n,{to:{name:"GroupList"}},{default:O(()=>[p(l(Ge))]),_:1})])}}},$=g(!1);function Le(){$.value=!0}function Ne(){$.value=!1}function je(){$.value=!$.value}function Q(){return{isOpen:$,open:Le,close:Ne,toggle:je}}const Be={class:"fixed inset-y-0 right-0 w-48 shadow-lg backdrop-blur flex flex-col justify-end text-center"},We=ae(" \u06AF\u0631\u0648\u0647 \u0647\u0627 "),De={setup(e){g([]);const{isOpen:t,close:o}=Q();return(i,n)=>{const r=R("router-link");return S((a(),d("div",Be,[p(r,{to:{name:"GroupList"},class:"p-2 ml-2 mb-2 rounded-l-full bg-green-300",onClick:l(o)},{default:O(()=>[We]),_:1},8,["onClick"]),u("button",{class:"p-2 ml-2 mb-2 rounded-l-full bg-yellow-500 text-white",onClick:n[0]||(n[0]=(...s)=>l(o)&&l(o)(...s))}," \u0628\u0633\u062A\u0646 ")],512)),[[G,l(t)]])}}};function Ke(e={}){const{immediate:t=!1,onNeedRefresh:o,onOfflineReady:i,onRegistered:n,onRegisterError:r}=e;let s,c;const _=async(f=!0)=>{f&&(s==null||s.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()})),c&&c.waiting&&await ce(c.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){s=new ue("/sw.js",{scope:"/"}),s.addEventListener("activated",f=>{f.isUpdate||i==null||i()});{const f=()=>{o==null||o()};s.addEventListener("waiting",f),s.addEventListener("externalwaiting",f)}s.register({immediate:t}).then(f=>{c=f,n==null||n(f)}).catch(f=>{r==null||r(f)})}return _}function Ae(e={}){const{immediate:t=!0,onNeedRefresh:o,onOfflineReady:i,onRegistered:n,onRegisterError:r}=e,s=g(!1),c=g(!1);return{updateServiceWorker:Ke({immediate:t,onNeedRefresh(){s.value=!0,o==null||o()},onOfflineReady(){c.value=!0,i==null||i()},onRegistered:n,onRegisterError:r}),offlineReady:c,needRefresh:s}}const qe={key:0,class:"fixed inset-x-0 bottom-0 m-4 p-3 shadow-2xl rounded border text-right bg-primary",role:"alert"},Me={key:0},Pe={key:1,class:"dir-rtl"},Ue={class:"pt-2.5 text-left"},Fe={setup(e){const{offlineReady:t,needRefresh:o,updateServiceWorker:i}=Ae(),n=async()=>{t.value=!1,o.value=!1};return(r,s)=>l(t)||l(o)?(a(),d("div",qe,[u("div",null,[l(t)?(a(),d("span",Me," \u0628\u0631\u0646\u0627\u0645\u0647 \u0622\u0645\u0627\u062F\u0647 \u0627\u0633\u062A \u06A9\u0647 \u0628\u0647 \u0635\u0648\u0631\u062A \u0622\u0641\u0644\u0627\u06CC\u0646 \u06A9\u0627\u0631 \u06A9\u0646\u062F. ")):(a(),d("span",Pe," \u0645\u062D\u062A\u0648\u0627\u06CC \u062C\u062F\u06CC\u062F \u0645\u0648\u062C\u0648\u062F \u0627\u0633\u062A\u060C \u0631\u0648\u06CC Reload \u06A9\u0644\u06CC\u06A9 \u06A9\u0646\u06CC\u062F \u062A\u0627 \u0628\u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC \u0634\u0648\u062F. "))]),u("div",Ue,[l(o)?(a(),d("button",{key:0,class:"bg-blue-600 text-white p-2.5 rounded-full text-xs font-bold mr-2",onClick:s[0]||(s[0]=c=>l(i)())}," Reload ")):U("",!0),u("button",{class:"bg-yellow-500 text-white p-2.5 rounded-full text-xs font-bold",onClick:s[1]||(s[1]=(...c)=>n&&n(...c))}," Close ")])])):U("",!0)}},Je={setup(e){return(t,o)=>{const i=R("router-view");return a(),d(E,null,[p(l(Ee)),p(l(De)),p(i),p(l(Fe)),p(l(Ie))],64)}}};var ze="/assets/writing-hand.71521691.gif";const He={},Qe={class:"material-icons-outlined"};function Xe(e,t){return a(),d("span",Qe," \uE14C ")}var Ye=x(He,[["render",Xe]]);const Ze={class:"p-2.5 border border-solid border-gray-300 rounded-full flex items-center mr-2.5 bg-white"},et=u("div",{class:"py-0 pl-1"},[u("img",{class:"h-10 w-10 -my-2.5",src:ze,alt:"writing-hand"})],-1),X={props:{modelValue:{type:String,required:!0},clearable:{type:Boolean,default:!1}},emits:["update:modelValue","enterKeyup","clearClick"],setup(e,{emit:t}){const o=e,i=L({get(){return o.modelValue},set(n){return t("update:modelValue",n)}});return(n,r)=>(a(),d("div",Ze,[et,S(u("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>fe(i)?i.value=s:null),class:"flex-grow border-0 focus:outline-none",type:"text",dir:"auto",onKeyup:r[1]||(r[1]=pe(s=>n.$emit("enterKeyup"),["enter"]))},null,544),[[de,l(i)]]),S(u("button",{class:"pt-2 -my-2",onClick:r[2]||(r[2]=s=>n.$emit("clearClick"))},[p(l(Ye))],512),[[G,e.clearable]])]))}};let Y={version:2,todos:[],groups:[],default_group_id:null};localStorage.databaseV2&&(Y=JSON.parse(localStorage.databaseV2));const T=me(Y);_e(()=>{localStorage.databaseV2=JSON.stringify(T)});function W(){return{database:T,todos:T.todos,groups:T.groups}}const{todos:b}=W();function tt(e,t){b.push({id:V(),text:e,group_id:t,completed:!1})}function ot(e){const t=b.find(o=>o.id===e);t.completed=!t.completed}function nt(e){const t=b.findIndex(o=>o.id===e);b.splice(t,1)}function st(e){return b.filter(t=>t.group_id==e)}function Z(){return{todos:b,addTodo:tt,completeTodo:ot,deleteTodo:nt,filterByGroupId:st}}const{database:ee,groups:w}=W(),{confirm:rt}=H(),lt=L({get(){return ee.default_group_id},set(e){ee.default_group_id=e}});function it(e){w.push({id:V(),title:e})}function at(e,t){const o=te(e);w[o]={id:e,title:t}}function ut(e){rt("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u06AF\u0631\u0648\u0647 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F",()=>{const t=te(e);w.splice(t,1)})}function te(e){return w.findIndex(t=>t.id===e)}function D(){return{groups:w,defaultGroupId:lt,addGroup:it,updateGroup:at,removeGroup:ut}}const ct={class:"bg-primary shadow mb-1.5 p-3.5 rounded-2xl flex"},dt=["checked"],ft={props:{focused:{type:Boolean,required:!1,default:!1},todo:{type:Object,required:!0}},emits:["click"],setup(e){const{completeTodo:t,deleteTodo:o}=Z();return(i,n)=>(a(),d("div",ct,[u("input",{class:"tick",type:"checkbox",checked:e.todo.completed,onChange:n[0]||(n[0]=()=>l(t)(e.todo.id))},null,40,dt),u("span",{class:ve(["flex-grow leading-7 -my-1 px-2.5",{"font-bold line-through":e.todo.completed,underline:e.focused}]),dir:"auto",onClick:n[1]||(n[1]=r=>i.$emit("click"))},I(e.todo.text),3),u("button",{class:"text-primary-dark border-0 cursor-pointer font-bold p-0",onClick:n[2]||(n[2]=()=>l(o)(e.todo.id))}," \u2717 ")]))}},pt={},mt={class:"material-icons-outlined"};function _t(e,t){return a(),d("span",mt," \uE5D2 ")}var vt=x(pt,[["render",_t]]);const gt={emits:["click"],setup(e,{emit:t}){function o(i){t("click",i)}return(i,n)=>(a(),d("button",{class:"b-0 rounded-full cursor-pointer p-2.5 bg-primary px-3.5 hover:bg-primary-dark text-primary-darker shadow font-medium",onClick:o},[p(l(vt),{class:"text-2xl"})]))}},xt={class:"flex flex-col h-full"},bt={class:"flex-grow"},ht={class:"flex p-2.5"},oe={setup(e){var C;const t=ge(),{toggle:o}=Q(),{defaultGroupId:i}=D(),{filterByGroupId:n,addTodo:r}=Z(),s=(C=t.params.id)!=null?C:i,c=g(-1);function _(v){c.value===v?c.value=-1:c.value=v}const f=g("");function h(){r(f.value,s),f.value=""}return(v,y)=>(a(),d("div",xt,[u("div",bt,[(a(!0),d(E,null,F(l(n)(l(s)),m=>(a(),k(l(ft),{key:m.id,todo:m,focused:m.id===c.value,onClick:()=>(_(m.id),!1)},null,8,["todo","focused","onClick"]))),128))]),u("div",ht,[p(l(X),{modelValue:f.value,"onUpdate:modelValue":y[0]||(y[0]=m=>f.value=m),class:"flex-grow",onEnterKeyup:h},null,8,["modelValue"]),p(l(gt),{class:"lg:hidden",onClick:l(o)},null,8,["onClick"])])]))}},yt={},kt={class:"material-icons-outlined"};function $t(e,t){return a(),d("span",kt," \uE3C9 ")}var wt=x(yt,[["render",$t]]);const Ct={},St={class:"material-icons-outlined"};function It(e,t){return a(),d("span",St," \uE872 ")}var Rt=x(Ct,[["render",It]]);const Vt={},Tt={class:"material-icons-outlined"};function Gt(e,t){return a(),d("span",Tt," \uE838 ")}var Ot=x(Vt,[["render",Gt]]);const Et={},Lt={class:"material-icons-outlined"};function Nt(e,t){return a(),d("span",Lt," \uE83A ")}var jt=x(Et,[["render",Nt]]);const Bt={class:"border text-primary-darker bg-primary h-full p-2 rounded shadow flex justify-between items-stretch"},Wt={class:"flex flex-col justify-between -my-2"},Dt={props:{group:{type:Object,required:!0}},emits:["editClick","removeClick"],setup(e){const t=e,{defaultGroupId:o}=D(),i=()=>({name:"TodoList",params:{id:t.group.id}});function n(r){o.value=r}return(r,s)=>{const c=R("router-link");return a(),k(c,{to:i(),class:"h-20 min-w-1/2 p-1"},{default:O(()=>[u("div",Bt,[u("div",null,I(e.group.title),1),u("div",Wt,[u("button",{onClick:s[0]||(s[0]=N(_=>n(e.group.id),["prevent"]))},[e.group.id===l(o)?(a(),k(l(Ot),{key:0,class:"text-sm w-6"})):(a(),k(l(jt),{key:1,class:"text-sm w-6"}))]),u("button",{onClick:s[1]||(s[1]=N(_=>r.$emit("editClick",e.group),["prevent"]))},[p(l(wt),{class:"text-sm w-6"})]),u("button",{onClick:s[2]||(s[2]=N(_=>r.$emit("removeClick",e.group),["prevent"]))},[p(l(Rt),{class:"text-sm w-6"})])])])]),_:1},8,["to"])}}},Kt={class:"flex flex-col justify-end h-full"},At={class:"flex flex-grow flex-wrap content-start px-1"},qt={class:"flex p-2.5"},Mt={setup(e){const{groups:t,addGroup:o,updateGroup:i,removeGroup:n}=D(),r=g(null),s=g(""),c=L(()=>r.value!==null);function _(){s.value="",r.value=null}function f(){c.value?i(r.value,s.value):o(s.value),_()}function h(v){s.value=v.title,r.value=v.id}function C(v){n(v.id)}return(v,y)=>(a(),d("div",Kt,[u("div",At,[(a(!0),d(E,null,F(l(t),m=>(a(),k(l(Dt),{key:m.id,group:m,onEditClick:h,onRemoveClick:C},null,8,["group"]))),128))]),u("div",qt,[p(l(X),{modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=m=>s.value=m),class:"flex-grow",clearable:l(c),onEnterKeyup:f,onClearClick:_},null,8,["modelValue","clearable"])])]))}},Pt=[{name:"Home",path:"/",component:oe},{name:"GroupList",path:"/groups",component:Mt},{name:"TodoList",path:"/groups/:id/todos",component:oe}],Ut=xe({history:be(),routes:Pt});const{database:K}=W();if(!localStorage.migrated){const e={version:2,groups:[],todos:[],default_group_id:null};Object.keys(localStorage).forEach(t=>{let o=t;o.trim()===""&&(o="default");const i=JSON.parse(localStorage[t]);if(!Array.isArray(i))return;const n=V();e.groups.push({id:n,title:o}),i.forEach(r=>e.todos.push(P(M({},r),{id:V(),group_id:n}))),e.default_group_id=n}),K.groups=e.groups,K.todos=e.todos,K.default_group_id=e.default_group_id,localStorage.migrated=!0,location.reload()}he(Je).use(Ut).mount("#app");
