import{o as d,c,r as $,w as I,v as S,a as u,b as C,p as R,d as N,e as k,f as V,t as B,n as E,g as O,h as L,u as f,i as w,j as v,k as h,F as x,l as W,m as K,q as A,s as P,x as q}from"./vendor.8b6de8b8.js";const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}};j();var m=(t,e)=>{const n=t.__vccOpts||t;for(const[a,o]of e)n[a]=o;return n};const U={emits:["click"],methods:{handleClick(t){this.$emit("click",t)}}};function D(t,e,n,a,o,s){return d(),c("button",{class:"btn-save p-10",onClick:e[0]||(e[0]=(...r)=>s.handleClick&&s.handleClick(...r))},[$(t.$slots,"default")])}var F=m(U,[["render",D]]);const J={},M={class:"navbar"};function z(t,e){return d(),c("p",M," Tote 3.1.3 ")}var G=m(J,[["render",z],["__scopeId","data-v-44f2e5ab"]]),H="/assets/writing-hand.71521691.gif";const Q={props:{modelValue:{type:String,required:!0}},emits:["update:modelValue","enterKeyup"],computed:{value:{get(){return this.modelValue},set(t){return this.$emit("update:modelValue",t)}}}},X=t=>(R("data-v-6741de88"),t=t(),N(),t),Y={class:"title-input p-10"},Z=X(()=>u("div",{class:"image"},[u("img",{src:H,alt:"writing-hand"})],-1));function ee(t,e,n,a,o,s){return d(),c("div",Y,[Z,I(u("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>s.value=r),type:"text",dir:"auto",onKeyup:e[1]||(e[1]=C(r=>t.$emit("enterKeyup"),["enter"]))},null,544),[[S,s.value]])])}var te=m(Q,[["render",ee],["__scopeId","data-v-6741de88"]]);const b=document.location.pathname.split("/").pop();var T;const _=k((T=JSON.parse(localStorage.getItem(b)))!=null?T:[]);V(()=>localStorage.setItem(b,JSON.stringify(_.value)));function oe(t){_.value.push({id:new Date().getTime(),text:t,completed:!1})}function ne(t){const e=_.value.find(n=>n.id===t);e.completed=!e.completed}function se(t){const e=_.value.findIndex(n=>n.id===t);_.value.splice(e,1)}const re={props:{focused:{type:Boolean,required:!1,default:!1},todo:{type:Object,required:!0}},emits:["click"],setup(){return{completeTodo:ne,deleteTodo:se}}},ae={class:"task"},ie=["checked"];function de(t,e,n,a,o,s){return d(),c("div",ae,[u("input",{class:"tick",type:"checkbox",checked:n.todo.completed,onChange:e[0]||(e[0]=()=>a.completeTodo(n.todo.id))},null,40,ie),u("span",{class:E(["content",{"bold linethrough":n.todo.completed,underline:n.focused}]),dir:"auto",onClick:e[1]||(e[1]=r=>t.$emit("click"))},B(n.todo.text),3),u("button",{class:"btn-delete",onClick:e[2]||(e[2]=()=>a.deleteTodo(n.todo.id))}," \u2717 ")])}var le=m(re,[["render",de]]);function ce(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:a,onRegistered:o,onRegisterError:s}=t;let r,l;const g=async(i=!0)=>{i&&(r==null||r.addEventListener("controlling",y=>{y.isUpdate&&window.location.reload()})),l&&l.waiting&&await L(l.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){r=new O("/sw.js",{scope:"/"}),r.addEventListener("activated",i=>{i.isUpdate||a==null||a()});{const i=()=>{n==null||n()};r.addEventListener("waiting",i),r.addEventListener("externalwaiting",i)}r.register({immediate:e}).then(i=>{l=i,o==null||o(i)}).catch(i=>{s==null||s(i)})}return g}function ue(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:a,onRegistered:o,onRegisterError:s}=t,r=k(!1),l=k(!1);return{updateServiceWorker:ce({immediate:e,onNeedRefresh(){r.value=!0,n==null||n()},onOfflineReady(){l.value=!0,a==null||a()},onRegistered:o,onRegisterError:s}),offlineReady:l,needRefresh:r}}const pe={key:0,class:"pwa-toast",role:"alert"},_e={class:"message"},fe={key:0},ve={key:1},me={setup(t){const{offlineReady:e,needRefresh:n,updateServiceWorker:a}=ue(),o=async()=>{e.value=!1,n.value=!1};return(s,r)=>f(e)||f(n)?(d(),c("div",pe,[u("div",_e,[f(e)?(d(),c("span",fe," App ready to work offline ")):(d(),c("span",ve," New content available, click on reload button to update. "))]),f(n)?(d(),c("button",{key:0,onClick:r[0]||(r[0]=l=>f(a)())}," Reload ")):w("",!0),u("button",{onClick:o}," Close ")])):w("",!0)}},ge={name:"App",components:{BaseButton:F,Navbar:G,BaseInput:te,TodoItem:le,ReloadPrompt:me},setup(){return{database:b,todos:_,addTodo:oe}},data(){return{newTodo:"",currentId:-1}},created(){document.title=`Todo: ${this.database}`},methods:{select(t){this.currentId===t?this.currentId=-1:this.currentId=t},saveTodo(){this.addTodo(this.newTodo),this.newTodo=""}}},he={class:"flex p-10"},ye=P(" Save ");function ke(t,e,n,a,o,s){const r=v("navbar"),l=v("todo-item"),g=v("base-input"),i=v("base-button"),y=v("reload-prompt");return d(),c(x,null,[h(r),u("div",null,[(d(!0),c(x,null,W(a.todos,p=>(d(),A(l,{key:p.id,todo:p,focused:p.id===o.currentId,onClick:()=>(s.select(p.id),!1)},null,8,["todo","focused","onClick"]))),128)),u("div",he,[h(g,{modelValue:o.newTodo,"onUpdate:modelValue":e[0]||(e[0]=p=>o.newTodo=p),class:"flex-grow",onEnterKeyup:s.saveTodo},null,8,["modelValue","onEnterKeyup"]),h(i,{onClick:s.saveTodo},{default:K(()=>[ye]),_:1},8,["onClick"])])]),h(y)],64)}var be=m(ge,[["render",ke]]);q(be).mount("#app");
