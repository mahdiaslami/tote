var te=Object.defineProperty,oe=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var M=(t,e,n)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K=(t,e)=>{for(var n in e||(e={}))se.call(e,n)&&M(t,n,e[n]);if(D)for(var n of D(e))re.call(e,n)&&M(t,n,e[n]);return t},A=(t,e)=>oe(t,ne(e));import{r as _,w as C,v as T,u as i,o as c,c as d,a,t as b,b as S,d as p,e as E,D as le,F as R,f as O,g as ie,h as ae,n as ce,i as q,j as P,k as ue,l as de,m as fe,p as pe,q as me,s as V,x as ve,y as _e,z as L,A as U,B as ge,C as xe,E as be}from"./vendor.e88f3336.js";const he=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}};he();const N=_(!1);let F="",G=null;function ye(t,e){F=t,G=e,N.value=!0}function ke(){G&&G(),J()}function J(){N.value=!1}function we(){return F}function z(){return{visible:N,close:J,confirm:ye,confirmed:ke,getMessage:we}}const $e={class:"fixed inset-x-0 bottom-0 m-4 p-3 shadow-2xl rounded border text-right bg-primary",role:"alert"},Ce={class:"pt-2.5 text-left"},Se={setup(t){const{visible:e,getMessage:n,confirmed:r,close:o}=z();return(l,s)=>C((c(),d("div",$e,[a("div",null,[a("span",null,b(i(n)()),1)]),a("div",Ce,[a("button",{class:"bg-blue-600 text-white p-2.5 rounded-full text-xs font-bold mr-2 w-20",onClick:s[0]||(s[0]=(...u)=>i(r)&&i(r)(...u))}," \u0628\u0644\u0647 "),a("button",{class:"bg-yellow-500 text-white p-2.5 rounded-full text-xs font-bold w-20",onClick:s[1]||(s[1]=(...u)=>i(o)&&i(o)(...u))}," \u062E\u06CC\u0631 ")])],512)),[[T,i(e)]])}};var h=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n};const Re={},Ve={class:"material-icons-outlined"};function Ie(t,e){return c(),d("span",Ve," \uE574 ")}var Te=h(Re,[["render",Ie]]);const Ee={class:"flex justify-between text-primary-dark p-5 font-bold mb-2.5 shadow-md"},Oe={setup(t){const e="3.5.0";return(n,r)=>{const o=S("router-link");return c(),d("div",Ee,[a("p",null," Tote "+b(i(e)),1),p(o,{to:{name:"GroupList"}},{default:E(()=>[p(i(Te))]),_:1})])}}},y=_(!1);function Le(){y.value=!0}function Ne(){y.value=!1}function Ge(){y.value=!y.value}function H(){return{isOpen:y,open:Le,close:Ne,toggle:Ge}}const j=new le("myDatabase");j.version(1).stores({users:"++id, name"});const je=Math.floor(Math.random()*100);j.users.add({name:`Mahdi ${je}`});const We={class:"fixed inset-y-0 right-0 w-48 shadow-lg backdrop-blur flex flex-col justify-end text-center"},Be=ie(" \u06AF\u0631\u0648\u0647 \u0647\u0627 "),De={setup(t){const e=_([]);j.users.toArray().then(o=>{console.log(o),e.value=o});const{isOpen:n,close:r}=H();return(o,l)=>{const s=S("router-link");return C((c(),d("div",We,[(c(!0),d(R,null,O(e.value,(u,m)=>(c(),d("div",{key:m},b(u.name),1))),128)),p(s,{to:{name:"GroupList"},class:"p-2 ml-2 mb-2 rounded-l-full bg-green-300",onClick:i(r)},{default:E(()=>[Be]),_:1},8,["onClick"]),a("button",{class:"p-2 ml-2 mb-2 rounded-l-full bg-yellow-500 text-white",onClick:l[0]||(l[0]=(...u)=>i(r)&&i(r)(...u))}," \u0628\u0633\u062A\u0646 ")],512)),[[T,i(n)]])}}};function Me(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisterError:l}=t;let s,u;const m=async(f=!0)=>{f&&(s==null||s.addEventListener("controlling",g=>{g.isUpdate&&window.location.reload()})),u&&u.waiting&&await ce(u.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){s=new ae("/sw.js",{scope:"/"}),s.addEventListener("activated",f=>{f.isUpdate||r==null||r()});{const f=()=>{n==null||n()};s.addEventListener("waiting",f),s.addEventListener("externalwaiting",f)}s.register({immediate:e}).then(f=>{u=f,o==null||o(f)}).catch(f=>{l==null||l(f)})}return m}function Ke(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisterError:l}=t,s=_(!1),u=_(!1);return{updateServiceWorker:Me({immediate:e,onNeedRefresh(){s.value=!0,n==null||n()},onOfflineReady(){u.value=!0,r==null||r()},onRegistered:o,onRegisterError:l}),offlineReady:u,needRefresh:s}}const Ae={key:0,class:"fixed inset-x-0 bottom-0 m-4 p-3 shadow-2xl rounded border text-right bg-primary",role:"alert"},qe={key:0},Pe={key:1,class:"dir-rtl"},Ue={class:"pt-2.5 text-left"},Fe={setup(t){const{offlineReady:e,needRefresh:n,updateServiceWorker:r}=Ke(),o=async()=>{e.value=!1,n.value=!1};return(l,s)=>i(e)||i(n)?(c(),d("div",Ae,[a("div",null,[i(e)?(c(),d("span",qe," \u0628\u0631\u0646\u0627\u0645\u0647 \u0622\u0645\u0627\u062F\u0647 \u0627\u0633\u062A \u06A9\u0647 \u0628\u0647 \u0635\u0648\u0631\u062A \u0622\u0641\u0644\u0627\u06CC\u0646 \u06A9\u0627\u0631 \u06A9\u0646\u062F. ")):(c(),d("span",Pe," \u0645\u062D\u062A\u0648\u0627\u06CC \u062C\u062F\u06CC\u062F \u0645\u0648\u062C\u0648\u062F \u0627\u0633\u062A\u060C \u0631\u0648\u06CC Reload \u06A9\u0644\u06CC\u06A9 \u06A9\u0646\u06CC\u062F \u062A\u0627 \u0628\u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC \u0634\u0648\u062F. "))]),a("div",Ue,[i(n)?(c(),d("button",{key:0,class:"bg-blue-600 text-white p-2.5 rounded-full text-xs font-bold mr-2",onClick:s[0]||(s[0]=u=>i(r)())}," Reload ")):q("",!0),a("button",{class:"bg-yellow-500 text-white p-2.5 rounded-full text-xs font-bold",onClick:s[1]||(s[1]=(...u)=>o&&o(...u))}," Close ")])])):q("",!0)}},Je={setup(t){return(e,n)=>{const r=S("router-view");return c(),d(R,null,[p(i(Oe)),p(i(De)),p(r),p(i(Fe)),p(i(Se))],64)}}};var ze="/assets/writing-hand.71521691.gif";const He={},Qe={class:"material-icons-outlined"};function Xe(t,e){return c(),d("span",Qe," \uE14C ")}var Ye=h(He,[["render",Xe]]);const Ze={class:"p-2.5 border border-solid border-gray-300 rounded-full flex items-center mr-2.5 bg-white"},et=a("div",{class:"py-0 pl-1"},[a("img",{class:"h-10 w-10 -my-2.5",src:ze,alt:"writing-hand"})],-1),Q={props:{modelValue:{type:String,required:!0},clearable:{type:Boolean,default:!1}},emits:["update:modelValue","enterKeyup","clearClick"],setup(t,{emit:e}){const n=t,r=P({get(){return n.modelValue},set(o){return e("update:modelValue",o)}});return(o,l)=>(c(),d("div",Ze,[et,C(a("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>de(r)?r.value=s:null),class:"flex-grow border-0 focus:outline-none",type:"text",dir:"auto",onKeyup:l[1]||(l[1]=fe(s=>o.$emit("enterKeyup"),["enter"]))},null,544),[[ue,i(r)]]),C(a("button",{class:"pt-2 -my-2",onClick:l[2]||(l[2]=s=>o.$emit("clearClick"))},[p(i(Ye))],512),[[T,t.clearable]])]))}};let X={version:2,todos:[],groups:[]};localStorage.databaseV2&&(X=JSON.parse(localStorage.databaseV2));const I=pe(X);me(()=>{localStorage.databaseV2=JSON.stringify(I)});function W(){return{database:I,todos:I.todos,groups:I.groups}}const{todos:x}=W();function tt(t,e){x.push({id:V(),text:t,group_id:e,completed:!1})}function ot(t){const e=x.find(n=>n.id===t);e.completed=!e.completed}function nt(t){const e=x.findIndex(n=>n.id===t);x.splice(e,1)}function st(t){return x.filter(e=>e.group_id==t)}function Y(){return{todos:x,addTodo:tt,completeTodo:ot,deleteTodo:nt,filterByGroupId:st}}const rt={class:"bg-primary shadow mb-1.5 p-3.5 rounded-2xl flex"},lt=["checked"],it={props:{focused:{type:Boolean,required:!1,default:!1},todo:{type:Object,required:!0}},emits:["click"],setup(t){const{completeTodo:e,deleteTodo:n}=Y();return(r,o)=>(c(),d("div",rt,[a("input",{class:"tick",type:"checkbox",checked:t.todo.completed,onChange:o[0]||(o[0]=()=>i(e)(t.todo.id))},null,40,lt),a("span",{class:ve(["flex-grow leading-7 -my-1 px-2.5",{"font-bold line-through":t.todo.completed,underline:t.focused}]),dir:"auto",onClick:o[1]||(o[1]=l=>r.$emit("click"))},b(t.todo.text),3),a("button",{class:"text-primary-dark border-0 cursor-pointer font-bold p-0",onClick:o[2]||(o[2]=()=>i(n)(t.todo.id))}," \u2717 ")]))}},at={},ct={class:"material-icons-outlined"};function ut(t,e){return c(),d("span",ct," \uE5D2 ")}var dt=h(at,[["render",ut]]);const ft={emits:["click"],setup(t,{emit:e}){function n(r){e("click",r)}return(r,o)=>(c(),d("button",{class:"b-0 rounded-full cursor-pointer p-2.5 bg-primary px-3.5 hover:bg-primary-dark text-primary-darker shadow font-medium",onClick:n},[p(i(dt),{class:"text-2xl"})]))}},pt={class:"flex flex-col h-full"},mt={class:"flex-grow"},vt={class:"flex p-2.5"},_t={setup(t){const e=_e(),{toggle:n}=H(),{filterByGroupId:r,addTodo:o}=Y(),l=e.params.id,s=_(-1);function u(g){s.value===g?s.value=-1:s.value=g}const m=_("");function f(){o(m.value,l),m.value=""}return(g,w)=>(c(),d("div",pt,[a("div",mt,[(c(!0),d(R,null,O(i(r)(i(l)),v=>(c(),L(i(it),{key:v.id,todo:v,focused:v.id===s.value,onClick:()=>(u(v.id),!1)},null,8,["todo","focused","onClick"]))),128))]),a("div",vt,[p(i(Q),{modelValue:m.value,"onUpdate:modelValue":w[0]||(w[0]=v=>m.value=v),class:"flex-grow",onEnterKeyup:f},null,8,["modelValue"]),p(i(ft),{class:"lg:hidden",onClick:i(n)},null,8,["onClick"])])]))}},{groups:k}=W(),{confirm:gt}=z();function xt(t){k.push({id:V(),title:t})}function bt(t,e){const n=Z(t);k[n]={id:t,title:e}}function ht(t){gt("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u06AF\u0631\u0648\u0647 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F",()=>{const e=Z(t);k.splice(e,1)})}function Z(t){return k.findIndex(e=>e.id===t)}function yt(){return{groups:k,addGroup:xt,updateGroup:bt,removeGroup:ht}}const kt={},wt={class:"material-icons-outlined"};function $t(t,e){return c(),d("span",wt," \uE3C9 ")}var Ct=h(kt,[["render",$t]]);const St={},Rt={class:"material-icons-outlined"};function Vt(t,e){return c(),d("span",Rt," \uE872 ")}var It=h(St,[["render",Vt]]);const Tt={class:"border text-primary-darker bg-primary h-full p-2 rounded shadow flex justify-between items-stretch"},Et={class:"flex flex-col justify-between"},Ot={props:{group:{type:Object,required:!0}},emits:["editClick","removeClick"],setup(t){const e=t,n=()=>({name:"TodoList",params:{id:e.group.id}});return(r,o)=>{const l=S("router-link");return c(),L(l,{to:n(),class:"h-20 min-w-1/2 p-1"},{default:E(()=>[a("div",Tt,[a("div",null,b(t.group.title),1),a("div",Et,[a("button",{onClick:o[0]||(o[0]=U(s=>r.$emit("editClick",t.group),["prevent"]))},[p(i(Ct),{class:"text-sm w-6"})]),a("button",{onClick:o[1]||(o[1]=U(s=>r.$emit("removeClick",t.group),["prevent"]))},[p(i(It),{class:"text-sm w-6"})])])])]),_:1},8,["to"])}}},Lt={class:"flex flex-col justify-end h-full"},Nt={class:"flex flex-grow flex-wrap content-start px-1"},Gt={class:"flex p-2.5"},jt={setup(t){const{groups:e,addGroup:n,updateGroup:r,removeGroup:o}=yt(),l=_(null),s=_(""),u=P(()=>l.value!==null);function m(){s.value="",l.value=null}function f(){u.value?r(l.value,s.value):n(s.value),m()}function g(v){s.value=v.title,l.value=v.id}function w(v){o(v.id)}return(v,B)=>(c(),d("div",Lt,[a("div",Nt,[(c(!0),d(R,null,O(i(e),$=>(c(),L(i(Ot),{key:$.id,group:$,onEditClick:g,onRemoveClick:w},null,8,["group"]))),128))]),a("div",Gt,[p(i(Q),{modelValue:s.value,"onUpdate:modelValue":B[0]||(B[0]=$=>s.value=$),class:"flex-grow",clearable:i(u),onEnterKeyup:f,onClearClick:m},null,8,["modelValue","clearable"])])]))}},Wt=[{name:"Home",path:"/",redirect:"/groups"},{name:"GroupList",path:"/groups",component:jt},{name:"TodoList",path:"/groups/:id/todos",component:_t}],Bt=ge({history:xe(),routes:Wt});const{database:ee}=W();if(!localStorage.migrated){const t={version:2,groups:[],todos:[]};Object.keys(localStorage).forEach(e=>{let n=e;n.trim()===""&&(n="default");const r=JSON.parse(localStorage[e]);if(!Array.isArray(r))return;const o=V();t.groups.push({id:o,title:n}),r.forEach(l=>t.todos.push(A(K({},l),{id:V(),group_id:o})))}),ee.groups=t.groups,ee.todos=t.todos,localStorage.migrated=!0}be(Je).use(Bt).mount("#app");
